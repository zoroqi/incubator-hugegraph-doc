<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>HugeGraph – HugeGraph-API Performance</title><link>/docs/performance/api-preformance/</link><description>Recent content in HugeGraph-API Performance on HugeGraph</description><generator>Hugo -- gohugo.io</generator><atom:link href="/docs/performance/api-preformance/index.xml" rel="self" type="application/rss+xml"/><item><title>Docs: v0.5.6 Stand-alone(RocksDB)</title><link>/docs/performance/api-preformance/hugegraph-api-0.5.6-rocksdb/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/performance/api-preformance/hugegraph-api-0.5.6-rocksdb/</guid><description>
&lt;h3 id="1-测试环境">1 测试环境&lt;/h3>
&lt;p>被压机器信息&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>CPU&lt;/th>
&lt;th>Memory&lt;/th>
&lt;th>网卡&lt;/th>
&lt;th>磁盘&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>48 Intel(R) Xeon(R) CPU E5-2650 v4 @ 2.20GHz&lt;/td>
&lt;td>128G&lt;/td>
&lt;td>10000Mbps&lt;/td>
&lt;td>750GB SSD,2.7T HDD&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;ul>
&lt;li>起压力机器信息：与被压机器同配置&lt;/li>
&lt;li>测试工具：apache-Jmeter-2.5.1&lt;/li>
&lt;/ul>
&lt;p>注：起压机器和被压机器在同一机房&lt;/p>
&lt;h3 id="2-测试说明">2 测试说明&lt;/h3>
&lt;h4 id="21-名词定义时间的单位均为ms">2.1 名词定义（时间的单位均为ms）&lt;/h4>
&lt;ul>
&lt;li>Samples &amp;ndash; 本次场景中一共完成了多少个线程&lt;/li>
&lt;li>Average &amp;ndash; 平均响应时间&lt;/li>
&lt;li>Median &amp;ndash; 统计意义上面的响应时间的中值&lt;/li>
&lt;li>90% Line &amp;ndash; 所有线程中90%的线程的响应时间都小于xx&lt;/li>
&lt;li>Min &amp;ndash; 最小响应时间&lt;/li>
&lt;li>Max &amp;ndash; 最大响应时间&lt;/li>
&lt;li>Error &amp;ndash; 出错率&lt;/li>
&lt;li>Throughput &amp;ndash; 吞吐量&lt;/li>
&lt;li>KB/sec &amp;ndash; 以流量做衡量的吞吐量&lt;/li>
&lt;/ul>
&lt;h4 id="22-底层存储">2.2 底层存储&lt;/h4>
&lt;p>后端存储使用RocksDB，HugeGraph与RocksDB都在同一机器上启动，server相关的配置文件除主机和端口有修改外，其余均保持默认。&lt;/p>
&lt;h3 id="3-性能结果总结">3 性能结果总结&lt;/h3>
&lt;ol>
&lt;li>HugeGraph单条插入顶点和边的速度在每秒1w左右&lt;/li>
&lt;li>顶点和边的批量插入速度远大于单条插入速度&lt;/li>
&lt;li>按id查询顶点和边的并发度可达到13000以上，且请求的平均延时小于50ms&lt;/li>
&lt;/ol>
&lt;h3 id="4-测试结果及分析">4 测试结果及分析&lt;/h3>
&lt;h4 id="41-batch插入">4.1 batch插入&lt;/h4>
&lt;h5 id="411-压力上限测试">4.1.1 压力上限测试&lt;/h5>
&lt;h6 id="测试方法">测试方法&lt;/h6>
&lt;p>不断提升并发量，测试server仍能正常提供服务的压力上限&lt;/p>
&lt;h6 id="压力参数">压力参数&lt;/h6>
&lt;p>持续时间：5min&lt;/p>
&lt;h6 id="顶点的最大插入速度">顶点的最大插入速度：&lt;/h6>
&lt;center>
&lt;img src="/docs/images/API-perf/v0.5.6/rocksdb/vertex_batch.png" alt="image">
&lt;/center>
&lt;p>####### 结论：&lt;/p>
&lt;ul>
&lt;li>并发2200，顶点的吞吐量是2026.8，每秒可处理的数据：2026.8*200=405360/s&lt;/li>
&lt;/ul>
&lt;h6 id="边的最大插入速度">边的最大插入速度&lt;/h6>
&lt;center>
&lt;img src="/docs/images/API-perf/v0.5.6/rocksdb/edge_batch.png" alt="image">
&lt;/center>
&lt;p>####### 结论：&lt;/p>
&lt;ul>
&lt;li>并发900，边的吞吐量是776.9，每秒可处理的数据：776.9*500=388450/s&lt;/li>
&lt;/ul>
&lt;h4 id="42-single插入">4.2 single插入&lt;/h4>
&lt;h5 id="421-压力上限测试">4.2.1 压力上限测试&lt;/h5>
&lt;h6 id="测试方法-1">测试方法&lt;/h6>
&lt;p>不断提升并发量，测试server仍能正常提供服务的压力上限&lt;/p>
&lt;h6 id="压力参数-1">压力参数&lt;/h6>
&lt;ul>
&lt;li>持续时间：5min&lt;/li>
&lt;li>服务异常标志：错误率大于0.00%&lt;/li>
&lt;/ul>
&lt;h6 id="顶点的单条插入">顶点的单条插入&lt;/h6>
&lt;center>
&lt;img src="/docs/images/API-perf/v0.5.6/rocksdb/vertex_single.png" alt="image">
&lt;/center>
&lt;p>####### 结论：&lt;/p>
&lt;ul>
&lt;li>并发11500，吞吐量为10730，顶点的单条插入并发能力为11500&lt;/li>
&lt;/ul>
&lt;h6 id="边的单条插入">边的单条插入&lt;/h6>
&lt;center>
&lt;img src="/docs/images/API-perf/v0.5.6/rocksdb/edge_single.png" alt="image">
&lt;/center>
&lt;p>####### 结论：&lt;/p>
&lt;ul>
&lt;li>并发9000，吞吐量是8418，边的单条插入并发能力为9000&lt;/li>
&lt;/ul>
&lt;h4 id="43-按id查询">4.3 按id查询&lt;/h4>
&lt;h5 id="431-压力上限测试">4.3.1 压力上限测试&lt;/h5>
&lt;h6 id="测试方法-2">测试方法&lt;/h6>
&lt;p>不断提升并发量，测试server仍能正常提供服务的压力上限&lt;/p>
&lt;h6 id="压力参数-2">压力参数&lt;/h6>
&lt;ul>
&lt;li>持续时间：5min&lt;/li>
&lt;li>服务异常标志：错误率大于0.00%&lt;/li>
&lt;/ul>
&lt;h6 id="顶点的按id查询">顶点的按id查询&lt;/h6>
&lt;center>
&lt;img src="/docs/images/API-perf/v0.5.6/rocksdb/vertex_id_query.png" alt="image">
&lt;/center>
&lt;p>####### 结论：&lt;/p>
&lt;ul>
&lt;li>并发14000，吞吐量是12663，顶点的按id查询的并发能力为14000，平均延时为44ms&lt;/li>
&lt;/ul>
&lt;h6 id="边的按id查询">边的按id查询&lt;/h6>
&lt;center>
&lt;img src="/docs/images/API-perf/v0.5.6/rocksdb/edge_id_query.png" alt="image">
&lt;/center>
&lt;p>####### 结论：&lt;/p>
&lt;ul>
&lt;li>并发13000，吞吐量是12225，边的按id查询的并发能力为13000，平均延时为12ms&lt;/li>
&lt;/ul></description></item><item><title>Docs: v0.5.6 Cluster(Cassandra)</title><link>/docs/performance/api-preformance/hugegraph-api-0.5.6-cassandra/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/performance/api-preformance/hugegraph-api-0.5.6-cassandra/</guid><description>
&lt;h3 id="1-测试环境">1 测试环境&lt;/h3>
&lt;p>被压机器信息&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>CPU&lt;/th>
&lt;th>Memory&lt;/th>
&lt;th>网卡&lt;/th>
&lt;th>磁盘&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>48 Intel(R) Xeon(R) CPU E5-2650 v4 @ 2.20GHz&lt;/td>
&lt;td>128G&lt;/td>
&lt;td>10000Mbps&lt;/td>
&lt;td>750GB SSD,2.7T HDD&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;ul>
&lt;li>起压力机器信息：与被压机器同配置&lt;/li>
&lt;li>测试工具：apache-Jmeter-2.5.1&lt;/li>
&lt;/ul>
&lt;p>注：起压机器和被压机器在同一机房&lt;/p>
&lt;h3 id="2-测试说明">2 测试说明&lt;/h3>
&lt;h4 id="21-名词定义时间的单位均为ms">2.1 名词定义（时间的单位均为ms）&lt;/h4>
&lt;ul>
&lt;li>Samples &amp;ndash; 本次场景中一共完成了多少个线程&lt;/li>
&lt;li>Average &amp;ndash; 平均响应时间&lt;/li>
&lt;li>Median &amp;ndash; 统计意义上面的响应时间的中值&lt;/li>
&lt;li>90% Line &amp;ndash; 所有线程中90%的线程的响应时间都小于xx&lt;/li>
&lt;li>Min &amp;ndash; 最小响应时间&lt;/li>
&lt;li>Max &amp;ndash; 最大响应时间&lt;/li>
&lt;li>Error &amp;ndash; 出错率&lt;/li>
&lt;li>Throughput &amp;ndash; 吞吐量&lt;/li>
&lt;li>KB/sec &amp;ndash; 以流量做衡量的吞吐量&lt;/li>
&lt;/ul>
&lt;h4 id="22-底层存储">2.2 底层存储&lt;/h4>
&lt;p>后端存储使用15节点Cassandra集群，HugeGraph与Cassandra集群位于不同的服务器，server相关的配置文件除主机和端口有修改外，其余均保持默认。&lt;/p>
&lt;h3 id="3-性能结果总结">3 性能结果总结&lt;/h3>
&lt;ol>
&lt;li>HugeGraph单条插入顶点和边的速度分别为9000和4500&lt;/li>
&lt;li>顶点和边的批量插入速度分别为5w/s和15w/s，远大于单条插入速度&lt;/li>
&lt;li>按id查询顶点和边的并发度可达到12000以上，且请求的平均延时小于70ms&lt;/li>
&lt;/ol>
&lt;h3 id="4-测试结果及分析">4 测试结果及分析&lt;/h3>
&lt;h4 id="41-batch插入">4.1 batch插入&lt;/h4>
&lt;h5 id="411-压力上限测试">4.1.1 压力上限测试&lt;/h5>
&lt;h6 id="测试方法">测试方法&lt;/h6>
&lt;p>不断提升并发量，测试server仍能正常提供服务的压力上限&lt;/p>
&lt;h6 id="压力参数">压力参数&lt;/h6>
&lt;p>持续时间：5min&lt;/p>
&lt;h6 id="顶点的最大插入速度">顶点的最大插入速度：&lt;/h6>
&lt;center>
&lt;img src="/docs/images/API-perf/v0.5.6/cassandra/vertex_batch.png" alt="image">
&lt;/center>
&lt;p>####### 结论：&lt;/p>
&lt;ul>
&lt;li>并发3500，顶点的吞吐量是261，每秒可处理的数据：261*200=52200/s&lt;/li>
&lt;/ul>
&lt;h6 id="边的最大插入速度">边的最大插入速度&lt;/h6>
&lt;center>
&lt;img src="/docs/images/API-perf/v0.5.6/cassandra/edge_batch.png" alt="image">
&lt;/center>
&lt;p>####### 结论：&lt;/p>
&lt;ul>
&lt;li>并发1000，边的吞吐量是323，每秒可处理的数据：323*500=161500/s&lt;/li>
&lt;/ul>
&lt;h4 id="42-single插入">4.2 single插入&lt;/h4>
&lt;h5 id="421-压力上限测试">4.2.1 压力上限测试&lt;/h5>
&lt;h6 id="测试方法-1">测试方法&lt;/h6>
&lt;p>不断提升并发量，测试server仍能正常提供服务的压力上限&lt;/p>
&lt;h6 id="压力参数-1">压力参数&lt;/h6>
&lt;ul>
&lt;li>持续时间：5min&lt;/li>
&lt;li>服务异常标志：错误率大于0.00%&lt;/li>
&lt;/ul>
&lt;h6 id="顶点的单条插入">顶点的单条插入&lt;/h6>
&lt;center>
&lt;img src="/docs/images/API-perf/v0.5.6/cassandra/vertex_single.png" alt="image">
&lt;/center>
&lt;p>####### 结论：&lt;/p>
&lt;ul>
&lt;li>并发9000，吞吐量为8400，顶点的单条插入并发能力为9000&lt;/li>
&lt;/ul>
&lt;h6 id="边的单条插入">边的单条插入&lt;/h6>
&lt;center>
&lt;img src="/docs/images/API-perf/v0.5.6/cassandra/edge_single.png" alt="image">
&lt;/center>
&lt;p>####### 结论：&lt;/p>
&lt;ul>
&lt;li>并发4500，吞吐量是4160，边的单条插入并发能力为4500&lt;/li>
&lt;/ul>
&lt;h4 id="43-按id查询">4.3 按id查询&lt;/h4>
&lt;h5 id="431-压力上限测试">4.3.1 压力上限测试&lt;/h5>
&lt;h6 id="测试方法-2">测试方法&lt;/h6>
&lt;p>不断提升并发量，测试server仍能正常提供服务的压力上限&lt;/p>
&lt;h6 id="压力参数-2">压力参数&lt;/h6>
&lt;ul>
&lt;li>持续时间：5min&lt;/li>
&lt;li>服务异常标志：错误率大于0.00%&lt;/li>
&lt;/ul>
&lt;h6 id="顶点的按id查询">顶点的按id查询&lt;/h6>
&lt;center>
&lt;img src="/docs/images/API-perf/v0.5.6/cassandra/vertex_id_query.png" alt="image">
&lt;/center>
&lt;p>####### 结论：&lt;/p>
&lt;ul>
&lt;li>并发14500，吞吐量是13576，顶点的按id查询的并发能力为14500，平均延时为11ms&lt;/li>
&lt;/ul>
&lt;h6 id="边的按id查询">边的按id查询&lt;/h6>
&lt;center>
&lt;img src="/docs/images/API-perf/v0.5.6/cassandra/edge_id_query.png" alt="image">
&lt;/center>
&lt;p>####### 结论：&lt;/p>
&lt;ul>
&lt;li>并发12000，吞吐量是10688，边的按id查询的并发能力为12000，平均延时为63ms&lt;/li>
&lt;/ul></description></item><item><title>Docs: v0.4.4</title><link>/docs/performance/api-preformance/hugegraph-api-0.4.4/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/performance/api-preformance/hugegraph-api-0.4.4/</guid><description>
&lt;h3 id="1-测试环境">1 测试环境&lt;/h3>
&lt;p>被压机器信息&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>机器编号&lt;/th>
&lt;th>CPU&lt;/th>
&lt;th>Memory&lt;/th>
&lt;th>网卡&lt;/th>
&lt;th>磁盘&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>1&lt;/td>
&lt;td>24 Intel(R) Xeon(R) CPU E5-2620 v2 @ 2.10GHz&lt;/td>
&lt;td>61G&lt;/td>
&lt;td>1000Mbps&lt;/td>
&lt;td>1.4T HDD&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>2&lt;/td>
&lt;td>48 Intel(R) Xeon(R) CPU E5-2650 v4 @ 2.20GHz&lt;/td>
&lt;td>128G&lt;/td>
&lt;td>10000Mbps&lt;/td>
&lt;td>750GB SSD,2.7T HDD&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;ul>
&lt;li>起压力机器信息：与编号 1 机器同配置&lt;/li>
&lt;li>测试工具：apache-Jmeter-2.5.1&lt;/li>
&lt;/ul>
&lt;p>注：起压机器和被压机器在同一机房&lt;/p>
&lt;h3 id="2-测试说明">2 测试说明&lt;/h3>
&lt;h4 id="21-名词定义时间的单位均为ms">2.1 名词定义（时间的单位均为ms）&lt;/h4>
&lt;ul>
&lt;li>Samples &amp;ndash; 本次场景中一共完成了多少个线程&lt;/li>
&lt;li>Average &amp;ndash; 平均响应时间&lt;/li>
&lt;li>Median &amp;ndash; 统计意义上面的响应时间的中值&lt;/li>
&lt;li>90% Line &amp;ndash; 所有线程中90%的线程的响应时间都小于xx&lt;/li>
&lt;li>Min &amp;ndash; 最小响应时间&lt;/li>
&lt;li>Max &amp;ndash; 最大响应时间&lt;/li>
&lt;li>Error &amp;ndash; 出错率&lt;/li>
&lt;li>Throughput &amp;ndash; 吞吐量&lt;/li>
&lt;li>KB/sec &amp;ndash; 以流量做衡量的吞吐量&lt;/li>
&lt;/ul>
&lt;h4 id="22-底层存储">2.2 底层存储&lt;/h4>
&lt;p>后端存储使用RocksDB，HugeGraph与RocksDB都在同一机器上启动，server相关的配置文件除主机和端口有修改外，其余均保持默认。&lt;/p>
&lt;h3 id="3-性能结果总结">3 性能结果总结&lt;/h3>
&lt;ol>
&lt;li>HugeGraph每秒能够处理的请求数目上限是7000&lt;/li>
&lt;li>批量插入速度远大于单条插入，在服务器上测试结果达到22w edges/s，37w vertices/s&lt;/li>
&lt;li>后端是RocksDB，增大CPU数目和内存大小可以增大批量插入的性能。CPU和内存扩大一倍，性能增加45%-60%&lt;/li>
&lt;li>批量插入场景，使用SSD替代HDD，性能提升较小，只有3%-5%&lt;/li>
&lt;/ol>
&lt;h3 id="4-测试结果及分析">4 测试结果及分析&lt;/h3>
&lt;h4 id="41-batch插入">4.1 batch插入&lt;/h4>
&lt;h5 id="411-压力上限测试">4.1.1 压力上限测试&lt;/h5>
&lt;h6 id="测试方法">测试方法&lt;/h6>
&lt;p>不断提升并发量，测试server仍能正常提供服务的压力上限&lt;/p>
&lt;h6 id="压力参数">压力参数&lt;/h6>
&lt;p>持续时间：5min&lt;/p>
&lt;h6 id="顶点和边的最大插入速度高性能服务器使用ssd存储rocksdb数据">顶点和边的最大插入速度（高性能服务器，使用SSD存储RocksDB数据）：&lt;/h6>
&lt;center>
&lt;img src="/docs/images/API-perf/v0.4.4/best.png" alt="image">
&lt;/center>
&lt;h6 id="结论">结论：&lt;/h6>
&lt;ul>
&lt;li>并发1000，边的吞吐量是是451，每秒可处理的数据：451*500条=225500/s&lt;/li>
&lt;li>并发2000，顶点的吞吐量是1842.4，每秒可处理的数据：1842.4*200=368480/s&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>1. CPU和内存对插入性能的影响（服务器都使用HDD存储RocksDB数据，批量插入）&lt;/strong>&lt;/p>
&lt;center>
&lt;img src="/docs/images/API-perf/v0.4.4/cpu-memory.png" alt="image">
&lt;/center>
&lt;h6 id="结论-1">结论：&lt;/h6>
&lt;ul>
&lt;li>同样使用HDD硬盘，CPU和内存增加了1倍&lt;/li>
&lt;li>边：吞吐量从268提升至426，性能提升了约60%&lt;/li>
&lt;li>顶点：吞吐量从1263.8提升至1842.4，性能提升了约45%&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>2. SSD和HDD对插入性能的影响（高性能服务器，批量插入）&lt;/strong>&lt;/p>
&lt;center>
&lt;img src="/docs/images/API-perf/v0.4.4/ssd.png" alt="image">
&lt;/center>
&lt;h6 id="结论-2">结论：&lt;/h6>
&lt;ul>
&lt;li>边：使用SSD吞吐量451.7,使用HDD吞吐量426.6，性能提升5%&lt;/li>
&lt;li>顶点：使用SSD吞吐量1842.4，使用HDD吞吐量1794，性能提升约3%&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>3. 不同并发线程数对插入性能的影响（普通服务器，使用HDD存储RocksDB数据）&lt;/strong>&lt;/p>
&lt;center>
&lt;img src="/docs/images/API-perf/v0.4.4/threads-batch.png" alt="image">
&lt;/center>
&lt;h6 id="结论-3">结论：&lt;/h6>
&lt;ul>
&lt;li>顶点：1000并发，响应时间7ms和1500并发响应时间1028ms差距悬殊，且吞吐量一直保持在1300左右，因此拐点数据应该在1300 ，且并发1300时，响应时间已达到22ms，在可控范围内，相比HugeGraph 0.2（1000并发：平均响应时间8959ms），处理能力出现质的飞跃；&lt;/li>
&lt;li>边：从1000并发到2000并发，处理时间过长，超过3s，且吞吐量几乎在270左右浮动，因此继续增大并发线程数吞吐量不会再大幅增长，270 是一个拐点，跟HugeGraph 0.2版本（1000并发：平均响应时间31849ms）相比较，处理能力提升非常明显；&lt;/li>
&lt;/ul>
&lt;h4 id="42-single插入">4.2 single插入&lt;/h4>
&lt;h5 id="421-压力上限测试">4.2.1 压力上限测试&lt;/h5>
&lt;h6 id="测试方法-1">测试方法&lt;/h6>
&lt;p>不断提升并发量，测试server仍能正常提供服务的压力上限&lt;/p>
&lt;h6 id="压力参数-1">压力参数&lt;/h6>
&lt;ul>
&lt;li>持续时间：5min&lt;/li>
&lt;li>服务异常标志：错误率大于0.00%&lt;/li>
&lt;/ul>
&lt;center>
&lt;img src="/docs/images/API-perf/v0.4.4/threads-single.png" alt="image">
&lt;/center>
&lt;h6 id="结论-4">结论：&lt;/h6>
&lt;ul>
&lt;li>顶点：
&lt;ul>
&lt;li>4000并发：正常，无错误率，平均耗时小于1ms， 6000并发无错误，平均耗时5ms，在可接受范围内；&lt;/li>
&lt;li>8000并发：存在0.01%的错误，已经无法处理，出现connection timeout错误，顶峰应该在7000左右&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>边：
&lt;ul>
&lt;li>4000并发：响应时间1ms，6000并发无任何异常，平均响应时间8ms，主要差异在于 IO network recv和send以及CPU）；&lt;/li>
&lt;li>8000并发：存在0.01%的错误率，平均耗15ms，拐点应该在7000左右，跟顶点结果匹配；&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>Docs: v0.2</title><link>/docs/performance/api-preformance/hugegraph-api-0.2/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/performance/api-preformance/hugegraph-api-0.2/</guid><description>
&lt;h3 id="1-测试环境">1 测试环境&lt;/h3>
&lt;h4 id="11-软硬件信息">1.1 软硬件信息&lt;/h4>
&lt;p>起压和被压机器配置相同，基本参数如下：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>CPU&lt;/th>
&lt;th>Memory&lt;/th>
&lt;th>网卡&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>24 Intel(R) Xeon(R) CPU E5-2620 v2 @ 2.10GHz&lt;/td>
&lt;td>61G&lt;/td>
&lt;td>1000Mbps&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>测试工具：apache-Jmeter-2.5.1&lt;/p>
&lt;h4 id="12-服务配置">1.2 服务配置&lt;/h4>
&lt;ul>
&lt;li>HugeGraph版本：0.2&lt;/li>
&lt;li>后端存储：使用服务内嵌的cassandra-3.10，单点部署；&lt;/li>
&lt;li>后端配置修改：修改了cassandra.yaml文件中的以下两个属性，其余选项均保持默认&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code> batch_size_warn_threshold_in_kb: 1000
batch_size_fail_threshold_in_kb: 1000
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>HugeGraphServer 与 HugeGremlinServer 与cassandra都在同一机器上启动，server 相关的配置文件除主机和端口有修改外，其余均保持默认。&lt;/li>
&lt;/ul>
&lt;h4 id="13-名词解释">1.3 名词解释&lt;/h4>
&lt;ul>
&lt;li>Samples &amp;ndash; 本次场景中一共完成了多少个线程&lt;/li>
&lt;li>Average &amp;ndash; 平均响应时间&lt;/li>
&lt;li>Median &amp;ndash; 统计意义上面的响应时间的中值&lt;/li>
&lt;li>90% Line &amp;ndash; 所有线程中90%的线程的响应时间都小于xx&lt;/li>
&lt;li>Min &amp;ndash; 最小响应时间&lt;/li>
&lt;li>Max &amp;ndash; 最大响应时间&lt;/li>
&lt;li>Error &amp;ndash; 出错率&lt;/li>
&lt;li>Troughput &amp;ndash; 吞吐量Â&lt;/li>
&lt;li>KB/sec &amp;ndash; 以流量做衡量的吞吐量&lt;/li>
&lt;/ul>
&lt;p>&lt;em>注：时间的单位均为ms&lt;/em>&lt;/p>
&lt;h3 id="2-测试结果">2 测试结果&lt;/h3>
&lt;h4 id="21-schema">2.1 schema&lt;/h4>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Label&lt;/th>
&lt;th>Samples&lt;/th>
&lt;th>Average&lt;/th>
&lt;th>Median&lt;/th>
&lt;th>90%Line&lt;/th>
&lt;th>Min&lt;/th>
&lt;th>Max&lt;/th>
&lt;th>Error%&lt;/th>
&lt;th>Throughput&lt;/th>
&lt;th>KB/sec&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>property_keys&lt;/td>
&lt;td>331000&lt;/td>
&lt;td>1&lt;/td>
&lt;td>1&lt;/td>
&lt;td>2&lt;/td>
&lt;td>0&lt;/td>
&lt;td>172&lt;/td>
&lt;td>0.00%&lt;/td>
&lt;td>920.7/sec&lt;/td>
&lt;td>178.1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>vertex_labels&lt;/td>
&lt;td>331000&lt;/td>
&lt;td>1&lt;/td>
&lt;td>2&lt;/td>
&lt;td>2&lt;/td>
&lt;td>1&lt;/td>
&lt;td>126&lt;/td>
&lt;td>0.00%&lt;/td>
&lt;td>920.7/sec&lt;/td>
&lt;td>193.4&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>edge_labels&lt;/td>
&lt;td>331000&lt;/td>
&lt;td>2&lt;/td>
&lt;td>2&lt;/td>
&lt;td>3&lt;/td>
&lt;td>1&lt;/td>
&lt;td>158&lt;/td>
&lt;td>0.00%&lt;/td>
&lt;td>920.7/sec&lt;/td>
&lt;td>242.8&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>结论：schema的接口，在1000并发持续5分钟的压力下，平均响应时间1-2ms，无压力&lt;/p>
&lt;h4 id="22-single-插入">2.2 single 插入&lt;/h4>
&lt;h5 id="221-插入速率测试">2.2.1 插入速率测试&lt;/h5>
&lt;h6 id="压力参数">压力参数&lt;/h6>
&lt;p>测试方法：固定并发量，测试server和后端的处理速率&lt;/p>
&lt;ul>
&lt;li>并发量：1000&lt;/li>
&lt;li>持续时间：5min&lt;/li>
&lt;/ul>
&lt;h6 id="性能指标">性能指标&lt;/h6>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Label&lt;/th>
&lt;th>Samples&lt;/th>
&lt;th>Average&lt;/th>
&lt;th>Median&lt;/th>
&lt;th>90%Line&lt;/th>
&lt;th>Min&lt;/th>
&lt;th>Max&lt;/th>
&lt;th>Error%&lt;/th>
&lt;th>Throughput&lt;/th>
&lt;th>KB/sec&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>single_insert_vertices&lt;/td>
&lt;td>331000&lt;/td>
&lt;td>0&lt;/td>
&lt;td>1&lt;/td>
&lt;td>1&lt;/td>
&lt;td>0&lt;/td>
&lt;td>21&lt;/td>
&lt;td>0.00%&lt;/td>
&lt;td>920.7/sec&lt;/td>
&lt;td>234.4&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>single_insert_edges&lt;/td>
&lt;td>331000&lt;/td>
&lt;td>2&lt;/td>
&lt;td>2&lt;/td>
&lt;td>3&lt;/td>
&lt;td>1&lt;/td>
&lt;td>53&lt;/td>
&lt;td>0.00%&lt;/td>
&lt;td>920.7/sec&lt;/td>
&lt;td>309.1&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h6 id="结论">结论&lt;/h6>
&lt;ul>
&lt;li>顶点：平均响应时间1ms，每个请求插入一条数据，平均每秒处理920个请求，则每秒平均总共处理的数据为1*920约等于920条数据；&lt;/li>
&lt;li>边：平均响应时间1ms，每个请求插入一条数据，平均每秒处理920个请求，则每秒平均总共处理的数据为1*920约等于920条数据；&lt;/li>
&lt;/ul>
&lt;h5 id="222-压力上限测试">2.2.2 压力上限测试&lt;/h5>
&lt;p>测试方法：不断提升并发量，测试server仍能正常提供服务的压力上限&lt;/p>
&lt;h6 id="压力参数-1">压力参数&lt;/h6>
&lt;ul>
&lt;li>持续时间：5min&lt;/li>
&lt;li>服务异常标志：错误率大于0.00%&lt;/li>
&lt;/ul>
&lt;h6 id="性能指标-1">性能指标&lt;/h6>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Concurrency&lt;/th>
&lt;th>Samples&lt;/th>
&lt;th>Average&lt;/th>
&lt;th>Median&lt;/th>
&lt;th>90%Line&lt;/th>
&lt;th>Min&lt;/th>
&lt;th>Max&lt;/th>
&lt;th>Error%&lt;/th>
&lt;th>Throughput&lt;/th>
&lt;th>KB/sec&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>2000(vertex)&lt;/td>
&lt;td>661916&lt;/td>
&lt;td>1&lt;/td>
&lt;td>1&lt;/td>
&lt;td>1&lt;/td>
&lt;td>0&lt;/td>
&lt;td>3012&lt;/td>
&lt;td>0.00%&lt;/td>
&lt;td>1842.9/sec&lt;/td>
&lt;td>469.1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>4000(vertex)&lt;/td>
&lt;td>1316124&lt;/td>
&lt;td>13&lt;/td>
&lt;td>1&lt;/td>
&lt;td>14&lt;/td>
&lt;td>0&lt;/td>
&lt;td>9023&lt;/td>
&lt;td>0.00%&lt;/td>
&lt;td>3673.1/sec&lt;/td>
&lt;td>935.0&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>5000(vertex)&lt;/td>
&lt;td>1468121&lt;/td>
&lt;td>1010&lt;/td>
&lt;td>1135&lt;/td>
&lt;td>1227&lt;/td>
&lt;td>0&lt;/td>
&lt;td>9223&lt;/td>
&lt;td>0.06%&lt;/td>
&lt;td>4095.6/sec&lt;/td>
&lt;td>1046.0&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>7000(vertex)&lt;/td>
&lt;td>1378454&lt;/td>
&lt;td>1617&lt;/td>
&lt;td>1708&lt;/td>
&lt;td>1886&lt;/td>
&lt;td>0&lt;/td>
&lt;td>9361&lt;/td>
&lt;td>0.08%&lt;/td>
&lt;td>3860.3/sec&lt;/td>
&lt;td>987.1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>2000(edge)&lt;/td>
&lt;td>629399&lt;/td>
&lt;td>953&lt;/td>
&lt;td>1043&lt;/td>
&lt;td>1113&lt;/td>
&lt;td>1&lt;/td>
&lt;td>9001&lt;/td>
&lt;td>0.00%&lt;/td>
&lt;td>1750.3/sec&lt;/td>
&lt;td>587.6&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>3000(edge)&lt;/td>
&lt;td>648364&lt;/td>
&lt;td>2258&lt;/td>
&lt;td>2404&lt;/td>
&lt;td>2500&lt;/td>
&lt;td>2&lt;/td>
&lt;td>9001&lt;/td>
&lt;td>0.00%&lt;/td>
&lt;td>1810.7/sec&lt;/td>
&lt;td>607.9&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>4000(edge)&lt;/td>
&lt;td>649904&lt;/td>
&lt;td>1992&lt;/td>
&lt;td>2112&lt;/td>
&lt;td>2211&lt;/td>
&lt;td>1&lt;/td>
&lt;td>9001&lt;/td>
&lt;td>0.06%&lt;/td>
&lt;td>1812.5/sec&lt;/td>
&lt;td>608.5&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h6 id="结论-1">结论&lt;/h6>
&lt;ul>
&lt;li>顶点：
&lt;ul>
&lt;li>4000并发：正常，无错误率，平均耗时13ms；&lt;/li>
&lt;li>5000并发：每秒处理5000个数据的插入，就会存在0.06%的错误，应该已经处理不了了，顶峰应该在4000&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>边：
&lt;ul>
&lt;li>1000并发：响应时间2ms，跟2000并发的响应时间相差较多，主要是 IO network rec和send以及CPU几乎增加了一倍）；&lt;/li>
&lt;li>2000并发：每秒处理2000个数据的插入，平均耗时953ms，平均每秒处理1750个请求；&lt;/li>
&lt;li>3000并发：每秒处理3000个数据的插入，平均耗时2258ms，平均每秒处理1810个请求；&lt;/li>
&lt;li>4000并发：每秒处理4000个数据的插入，平均每秒处理1812个请求；&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h4 id="23-batch-插入">2.3 batch 插入&lt;/h4>
&lt;h5 id="231-插入速率测试">2.3.1 插入速率测试&lt;/h5>
&lt;h6 id="压力参数-2">压力参数&lt;/h6>
&lt;p>测试方法：固定并发量，测试server和后端的处理速率&lt;/p>
&lt;ul>
&lt;li>并发量：1000&lt;/li>
&lt;li>持续时间：5min&lt;/li>
&lt;/ul>
&lt;h6 id="性能指标-2">性能指标&lt;/h6>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Label&lt;/th>
&lt;th>Samples&lt;/th>
&lt;th>Average&lt;/th>
&lt;th>Median&lt;/th>
&lt;th>90%Line&lt;/th>
&lt;th>Min&lt;/th>
&lt;th>Max&lt;/th>
&lt;th>Error%&lt;/th>
&lt;th>Throughput&lt;/th>
&lt;th>KB/sec&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>batch_insert_vertices&lt;/td>
&lt;td>37162&lt;/td>
&lt;td>8959&lt;/td>
&lt;td>9595&lt;/td>
&lt;td>9704&lt;/td>
&lt;td>17&lt;/td>
&lt;td>9852&lt;/td>
&lt;td>0.00%&lt;/td>
&lt;td>103.4/sec&lt;/td>
&lt;td>393.3&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>batch_insert_edges&lt;/td>
&lt;td>10800&lt;/td>
&lt;td>31849&lt;/td>
&lt;td>34544&lt;/td>
&lt;td>35132&lt;/td>
&lt;td>435&lt;/td>
&lt;td>35747&lt;/td>
&lt;td>0.00%&lt;/td>
&lt;td>28.8/sec&lt;/td>
&lt;td>814.9&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h6 id="结论-2">结论&lt;/h6>
&lt;ul>
&lt;li>顶点：平均响应时间为8959ms，处理时间过长。每个请求插入199条数据，平均每秒处理103个请求，则每秒平均总共处理的数据为199*131约等于2w条数据；&lt;/li>
&lt;li>边：平均响应时间31849ms，处理时间过长。每个请求插入499个数据，平均每秒处理28个请求，则每秒平均总共处理的数据为28*499约等于13900条数据；&lt;/li>
&lt;/ul></description></item></channel></rss>